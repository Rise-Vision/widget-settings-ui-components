"undefined"!=typeof angular&&angular.module("risevision.widget.common.storage-selector.config",[]).value("STORAGE_MODAL","https://apps.risevision.com/storage-selector.html#/?cid="),function(){"use strict";angular.module("risevision.widget.common.storage-selector",["ui.bootstrap","risevision.widget.common.storage-selector.config"]).directive("storageSelector",["$templateCache","$modal","$sce","$log","STORAGE_MODAL",function(e,t,o,n,s){return{restrict:"EA",scope:{companyId:"@",type:"@",label:"@",selected:"="},template:e.get("storage-selector.html"),link:function(e){function r(){e.storageUrl="undefined"!=typeof e.type&&""!==e.type?s+e.companyId+"&selector-type="+e.type:s+e.companyId}e.storageUrl="",e.open=function(){e.modalInstance=t.open({templateUrl:"storage.html",controller:"StorageCtrl",size:"md",backdrop:!0,resolve:{storageUrl:function(){return{url:o.trustAsResourceUrl(e.storageUrl)}}}}),e.modalInstance.result.then(function(t){e.files=t,n.info("Picked: ",t),e.$emit("picked",t,e.type)},function(){e.canceled=!0,n.info("Modal dismissed at: "+new Date)})},e.$watch("companyId",function(e){e&&r()}),e.$watch("type",function(e){e&&r()})}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log","STORAGE_MODAL",function(e,t,o,n,s,r){e.storageUrl=o,e.isSameOrigin=function(e){var t=document.createElement("a");return t.href=r,-1!==e.indexOf(t.host)},e.messageHandler=function(o){e.isSameOrigin(o.origin)&&(Array.isArray(o.data)?t.close(o.data):"string"==typeof o.data&&"close"===o.data&&t.dismiss("cancel"))},n.addEventListener("message",e.messageHandler)}]),function(e){try{e=angular.module("risevision.widget.common.storage-selector")}catch(t){e=angular.module("risevision.widget.common.storage-selector",[])}e.run(["$templateCache",function(e){"use strict";e.put("storage-selector.html",'<button class="btn btn-default" ng-class="{active: selected}" ng-click="open()" type="button" >\n  {{ label }}<img src="http://s3.amazonaws.com/Rise-Images/Icons/storage.png" class="storage-selector-icon" ng-class="{\'icon-right\': label}">\n</button>\n\n<script type="text/ng-template" id="storage.html">\n        <iframe class="modal-dialog" scrolling="no" marginwidth="0" src="{{ storageUrl.url }}"></iframe>\n</script>\n')}])}();