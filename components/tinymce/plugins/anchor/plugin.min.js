tinymce.PluginManager.add("anchor",function(a){var b=function(a){return!a.attr("href")&&(a.attr("id")||a.attr("name"))&&!a.firstChild},c=function(a){return function(c){for(var d=0;d<c.length;d++)b(c[d])&&c[d].attr("contenteditable",a)}},d=function(a){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(a)},e=function(){var b=a.selection.getNode(),c="A"==b.tagName&&""===a.dom.getAttrib(b,"href"),e="";c&&(e=b.id||b.name||""),a.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:e},onsubmit:function(e){var f=e.data.id;return d(f)?void(c?(b.removeAttribute("name"),b.id=f):(a.selection.collapse(!0),a.execCommand("mceInsertContent",!1,a.dom.createHTML("a",{id:f})))):(e.preventDefault(),void a.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."))}})};tinymce.Env.ceFalse&&a.on("PreInit",function(){a.parser.addNodeFilter("a",c("false")),a.serializer.addNodeFilter("a",c(null))}),a.addCommand("mceAnchor",e),a.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:e,stateSelector:"a:not([href])"}),a.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:e})});