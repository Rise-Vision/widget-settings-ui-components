!function(){var a={},b=function(b){for(var c=a[b],e=c.deps,f=c.defn,g=e.length,h=new Array(g),i=0;i<g;++i)h[i]=d(e[i]);var j=f.apply(null,h);if(void 0===j)throw"module ["+b+"] returned undefined";c.instance=j},c=function(b,c,d){if("string"!=typeof b)throw"module id must be a string";if(void 0===c)throw"no dependencies for "+b;if(void 0===d)throw"no definition function for "+b;a[b]={deps:c,defn:d,instance:void 0}},d=function(c){var d=a[c];if(void 0===d)throw"module ["+c+"] was undefined";return void 0===d.instance&&b(c),d.instance},e=function(a,b){for(var c=a.length,e=new Array(c),f=0;f<c;++f)e[f]=d(a[f]);b.apply(null,e)},f={};f.bolt={module:{api:{define:c,require:e,demand:d}}};var g=c,h=function(a,b){g(a,[],function(){return b})};h("1",tinymce.PluginManager),h("2",tinymce.util.Tools),h("3",tinymce.util.VK),g("4",[],function(){var a=function(a){return a&&3===a.nodeType},b=function(a){return a&&/^(OL|UL|DL)$/.test(a.nodeName)},c=function(a){return a&&/^(LI|DT|DD)$/.test(a.nodeName)},d=function(a){return a&&"BR"===a.nodeName},e=function(a){return a.parentNode.firstChild===a},f=function(a){return a.parentNode.lastChild===a},g=function(a,b){return b&&!!a.schema.getTextBlockElements()[b.nodeName]},h=function(a,b){return!!d(b)&&!(!a.isBlock(b.nextSibling)||d(b.previousSibling))},i=function(a,b,c){var d=a.isEmpty(b);return!(c&&a.select("span[data-mce-type=bookmark]",b).length>0)&&d},j=function(a,b){return a.isChildOf(b,a.getRoot())};return{isTextNode:a,isListNode:b,isListItemNode:c,isBr:d,isFirstChild:e,isLastChild:f,isTextBlock:g,isBogusBr:h,isEmpty:i,isChildOfBody:j}}),h("9",tinymce.dom.TreeWalker),h("a",tinymce.dom.RangeUtils),g("b",["2","4"],function(a,b){var c=function(c){return a.grep(c.selection.getSelectedBlocks(),function(a){return b.isListItemNode(a)})};return{getSelectedListItems:c}}),h("h",tinymce.dom.DOMUtils.DOM),g("d",["a","4"],function(a,b){var c=function(c,d){var e=a.getNode(c,d);if(b.isListItemNode(c)&&b.isTextNode(e)){var f=d>=c.childNodes.length?e.data.length:0;return{container:e,offset:f}}return{container:c,offset:d}},d=function(a){var b=a.cloneRange(),d=c(a.startContainer,a.startOffset);b.setStart(d.container,d.offset);var e=c(a.endContainer,a.endOffset);return b.setEnd(e.container,e.offset),b};return{getNormalizedEndPoint:c,normalizeRange:d}}),g("c",["h","4","d"],function(a,b,c){var d=function(b){var c={},d=function(d){var e,f,g;f=b[d?"startContainer":"endContainer"],g=b[d?"startOffset":"endOffset"],1===f.nodeType&&(e=a.create("span",{"data-mce-type":"bookmark"}),f.hasChildNodes()?(g=Math.min(g,f.childNodes.length-1),d?f.insertBefore(e,f.childNodes[g]):a.insertAfter(e,f.childNodes[g])):f.appendChild(e),f=e,g=0),c[d?"startContainer":"endContainer"]=f,c[d?"startOffset":"endOffset"]=g};return d(!0),b.collapsed||d(),c},e=function(b){function d(c){var d,e,f,g=function(a){for(var b=a.parentNode.firstChild,c=0;b;){if(b===a)return c;1===b.nodeType&&"bookmark"===b.getAttribute("data-mce-type")||c++,b=b.nextSibling}return-1};d=f=b[c?"startContainer":"endContainer"],e=b[c?"startOffset":"endOffset"],d&&(1===d.nodeType&&(e=g(d),d=d.parentNode,a.remove(f)),b[c?"startContainer":"endContainer"]=d,b[c?"startOffset":"endOffset"]=e)}d(!0),d();var e=a.createRng();return e.setStart(b.startContainer,b.startOffset),b.endContainer&&e.setEnd(b.endContainer,b.endOffset),c.normalizeRange(e)};return{createBookmark:d,resolveBookmark:e}}),g("e",["h","2","4"],function(a,b,c){var d=function(b,d){var e,f=d.parentNode;"LI"===f.nodeName&&f.firstChild===d&&(e=f.previousSibling,e&&"LI"===e.nodeName?(e.appendChild(d),c.isEmpty(b,f)&&a.remove(f)):a.setStyle(f,"listStyleType","none")),c.isListNode(f)&&(e=f.previousSibling,e&&"LI"===e.nodeName&&e.appendChild(d))},e=function(a,c){b.each(b.grep(a.select("ol,ul",c)),function(b){d(a,b)})};return{normalizeList:d,normalizeLists:e}}),h("f",tinymce.dom.BookmarkManager),h("j",tinymce.Env),g("i",["h","j"],function(a,b){var c=function(c,d,e){var f,g,h,i=a.createFragment(),j=c.schema.getBlockElements();if(c.settings.forced_root_block&&(e=e||c.settings.forced_root_block),e&&(g=a.create(e),g.tagName===c.settings.forced_root_block&&a.setAttribs(g,c.settings.forced_root_block_attrs),i.appendChild(g)),d)for(;f=d.firstChild;){var k=f.nodeName;h||"SPAN"===k&&"bookmark"===f.getAttribute("data-mce-type")||(h=!0),j[k]?(i.appendChild(f),g=null):e?(g||(g=a.create(e),i.appendChild(g)),g.appendChild(f)):i.appendChild(f)}return c.settings.forced_root_block?h||b.ie&&!(b.ie>10)||g.appendChild(a.create("br",{"data-mce-bogus":"1"})):i.appendChild(a.create("br")),i};return{createNewTextBlock:c}}),g("g",["h","2","i","4"],function(a,b,c,d){var e=function(e,f,g,h){var i,j,k,l,m=function(c){b.each(k,function(a){c.parentNode.insertBefore(a,g.parentNode)}),a.remove(c)};for(k=a.select('span[data-mce-type="bookmark"]',f),h=h||c.createNewTextBlock(e,g),i=a.createRng(),i.setStartAfter(g),i.setEndAfter(f),j=i.extractContents(),l=j.firstChild;l;l=l.firstChild)if("LI"===l.nodeName&&e.dom.isEmpty(l)){a.remove(l);break}e.dom.isEmpty(j)||a.insertAfter(j,f),a.insertAfter(h,f),d.isEmpty(e.dom,g.parentNode)&&m(g.parentNode),a.remove(g),d.isEmpty(e.dom,f)&&a.remove(f)};return{splitList:e}}),g("7",["h","4","c","b","g","e","i"],function(a,b,c,d,e,f,g){var h=function(c,d){b.isEmpty(c,d)&&a.remove(d)},i=function(c,d){var i,j=d.parentNode,k=j.parentNode;return j===c.getBody()||("DD"===d.nodeName?(a.rename(d,"DT"),!0):b.isFirstChild(d)&&b.isLastChild(d)?("LI"===k.nodeName?(a.insertAfter(d,k),h(c.dom,k),a.remove(j)):b.isListNode(k)?a.remove(j,!0):(k.insertBefore(g.createNewTextBlock(c,d),j),a.remove(j)),!0):b.isFirstChild(d)?("LI"===k.nodeName?(a.insertAfter(d,k),d.appendChild(j),h(c.dom,k)):b.isListNode(k)?k.insertBefore(d,j):(k.insertBefore(g.createNewTextBlock(c,d),j),a.remove(d)),!0):b.isLastChild(d)?("LI"===k.nodeName?a.insertAfter(d,k):b.isListNode(k)?a.insertAfter(d,j):(a.insertAfter(g.createNewTextBlock(c,d),j),a.remove(d)),!0):("LI"===k.nodeName?(j=k,i=g.createNewTextBlock(c,d,"LI")):i=b.isListNode(k)?g.createNewTextBlock(c,d,"LI"):g.createNewTextBlock(c,d),e.splitList(c,j,d,i),f.normalizeLists(c.dom,j.parentNode),!0))},j=function(a){var b=d.getSelectedListItems(a);if(b.length){var e,f,g=c.createBookmark(a.selection.getRng(!0)),h=a.getBody();for(e=b.length;e--;)for(var j=b[e].parentNode;j&&j!==h;){for(f=b.length;f--;)if(b[f]===j){b.splice(e,1);break}j=j.parentNode}for(e=0;e<b.length&&(i(a,b[e])||0!==e);e++);return a.selection.setRng(c.resolveBookmark(g)),a.nodeChanged(),!0}};return{outdent:i,outdentSelection:j}}),g("8",["2","f","b","4","c","g","e","7"],function(a,b,c,d,e,f,g,h){var i=function(a,b,c){var d=c["list-style-type"]?c["list-style-type"]:null;a.setStyle(b,"list-style-type",d)},j=function(b,c){a.each(c,function(a,c){b.setAttribute(c,a)})},k=function(b,c,d){j(c,d["list-attributes"]),a.each(b.select("li",c),function(a){j(a,d["list-item-attributes"])})},l=function(a,b,c){i(a,b,c),k(a,b,c)},m=function(a,b,c){var e,f,g=a.getBody();for(e=b[c?"startContainer":"endContainer"],f=b[c?"startOffset":"endOffset"],1===e.nodeType&&(e=e.childNodes[Math.min(f,e.childNodes.length-1)]||e);e.parentNode!==g;){if(d.isTextBlock(a,e))return e;if(/^(TD|TH)$/.test(e.parentNode.nodeName))return e;e=e.parentNode}return e},n=function(c,e){for(var f,g=[],h=c.getBody(),i=c.dom,j=m(c,e,!0),k=m(c,e,!1),l=[],n=j;n&&(l.push(n),n!==k);n=n.nextSibling);return a.each(l,function(a){if(d.isTextBlock(c,a))return g.push(a),void(f=null);if(i.isBlock(a)||d.isBr(a))return d.isBr(a)&&i.remove(a),void(f=null);var e=a.nextSibling;return b.isBookmarkNode(a)&&(d.isTextBlock(c,e)||!e&&a.parentNode===h)?void(f=null):(f||(f=i.create("p"),a.parentNode.insertBefore(f,a),g.push(f)),void f.appendChild(a))}),g},o=function(b,c,f){var g,h=b.selection.getRng(!0),i="LI",j=b.dom;f=f?f:{},"false"!==j.getContentEditable(b.selection.getNode())&&(c=c.toUpperCase(),"DL"===c&&(i="DT"),g=e.createBookmark(h),a.each(n(b,h),function(a){var e,g,h=function(a){var b=j.getStyle(a,"list-style-type"),c=f?f["list-style-type"]:"";return c=null===c?"":c,b===c};g=a.previousSibling,g&&d.isListNode(g)&&g.nodeName===c&&h(g)?(e=g,a=j.rename(a,i),g.appendChild(a)):(e=j.create(c),a.parentNode.insertBefore(e,a),e.appendChild(a),a=j.rename(a,i)),l(j,e,f),u(b.dom,e)}),b.selection.setRng(e.resolveBookmark(g)))},p=function(b){var i=e.createBookmark(b.selection.getRng(!0)),j=b.getBody(),k=c.getSelectedListItems(b),l=a.grep(k,function(a){return b.dom.isEmpty(a)});k=a.grep(k,function(a){return!b.dom.isEmpty(a)}),a.each(l,function(a){if(d.isEmpty(b.dom,a))return void h.outdent(b,a)}),a.each(k,function(a){var c,e;if(a.parentNode!==b.getBody()){for(c=a;c&&c!==j;c=c.parentNode)d.isListNode(c)&&(e=c);f.splitList(b,e,a),g.normalizeLists(b.dom,e.parentNode)}}),b.selection.setRng(e.resolveBookmark(i))},q=function(a,b){return a&&b&&d.isListNode(a)&&a.nodeName===b.nodeName},r=function(a,b,c){var d=a.getStyle(b,"list-style-type",!0),e=a.getStyle(c,"list-style-type",!0);return d===e},s=function(a,b){return a.className===b.className},t=function(a,b,c){return q(b,c)&&r(a,b,c)&&s(b,c)},u=function(a,b){var c,d;if(c=b.nextSibling,t(a,b,c)){for(;d=c.firstChild;)b.appendChild(d);a.remove(c)}if(c=b.previousSibling,t(a,b,c)){for(;d=c.lastChild;)b.insertBefore(d,b.firstChild);a.remove(c)}},v=function(a,b,c){var d=a.dom.getParent(a.selection.getStart(),"OL,UL,DL");if(c=c?c:{},d!==a.getBody())if(d)if(d.nodeName===b)p(a,b);else{var f=e.createBookmark(a.selection.getRng(!0));l(a.dom,d,c),u(a.dom,a.dom.rename(d,b)),a.selection.setRng(e.resolveBookmark(f))}else o(a,b,c)};return{toggleList:v,removeList:p,mergeWithAdjacentLists:u}}),g("5",["9","a","3","b","4","c","d","e","8"],function(a,b,c,d,e,f,g,h,i){var j=function(c,d,f){var g,h,i=d.startContainer,j=d.startOffset;if(3===i.nodeType&&(f?j<i.data.length:j>0))return i;for(g=c.schema.getNonEmptyElements(),1===i.nodeType&&(i=b.getNode(i,j)),h=new a(i,c.getBody()),f&&e.isBogusBr(c.dom,i)&&h.next();i=h[f?"next":"prev2"]();){if("LI"===i.nodeName&&!i.hasChildNodes())return i;if(g[i.nodeName])return i;if(3===i.nodeType&&i.data.length>0)return i}},k=function(a,b,c){var d,f,g=b.parentNode;if(e.isChildOfBody(a,b)&&e.isChildOfBody(a,c)){if(e.isListNode(c.lastChild)&&(f=c.lastChild),g===c.lastChild&&e.isBr(g.previousSibling)&&a.remove(g.previousSibling),d=c.lastChild,d&&e.isBr(d)&&b.hasChildNodes()&&a.remove(d),e.isEmpty(a,c,!0)&&a.$(c).empty(),!e.isEmpty(a,b,!0))for(;d=b.firstChild;)c.appendChild(d);f&&c.appendChild(f),a.remove(b),e.isEmpty(a,g)&&g!==a.getRoot()&&a.remove(g)}},l=function(a,b){var c,d,h,l=a.dom,m=a.selection,n=l.getParent(m.getStart(),"LI");if(n){if(c=n.parentNode,c===a.getBody()&&e.isEmpty(l,c))return!0;if(d=g.normalizeRange(m.getRng(!0)),h=l.getParent(j(a,d,b),"LI"),h&&h!==n){var o=f.createBookmark(d);return b?k(l,h,n):k(l,n,h),a.selection.setRng(f.resolveBookmark(o)),!0}if(!h&&!b&&i.removeList(a,c.nodeName))return!0}return!1},m=function(a,b){var c=a.dom,d=c.getParent(a.selection.getStart(),c.isBlock);if(d&&c.isEmpty(d)){var e=g.normalizeRange(a.selection.getRng(!0)),f=c.getParent(j(a,e,b),"LI");if(f)return a.undoManager.transact(function(){c.remove(d),i.mergeWithAdjacentLists(c,f.parentNode),a.selection.select(f,!0),a.selection.collapse(b)}),!0}return!1},n=function(a,b){return l(a,b)||m(a,b)},o=function(a){var b=a.dom.getParent(a.selection.getStart(),"LI,DT,DD");return!!(b||d.getSelectedListItems(a).length>0)&&(a.undoManager.transact(function(){a.execCommand("Delete"),h.normalizeLists(a.dom,a.getBody())}),!0)},p=function(a,b){return a.selection.isCollapsed()?n(a,b):o(a)},q=function(a){a.on("keydown",function(b){b.keyCode===c.BACKSPACE?p(a,!1)&&b.preventDefault():b.keyCode===c.DELETE&&p(a,!0)&&b.preventDefault()})};return{setup:q,backspaceDelete:p}}),g("6",["h","4","c","b"],function(a,b,c,d){var e=function(c,d){var e;if(b.isListNode(c)){for(;e=c.firstChild;)d.appendChild(e);a.remove(c)}},f=function(c){var d,f,g;return"DT"===c.nodeName?(a.rename(c,"DD"),!0):(d=c.previousSibling,d&&b.isListNode(d)?(d.appendChild(c),!0):d&&"LI"===d.nodeName&&b.isListNode(d.lastChild)?(d.lastChild.appendChild(c),e(c.lastChild,d.lastChild),!0):(d=c.nextSibling,d&&b.isListNode(d)?(d.insertBefore(c,d.firstChild),!0):(d=c.previousSibling,!(!d||"LI"!==d.nodeName)&&(f=a.create(c.parentNode.nodeName),g=a.getStyle(c.parentNode,"listStyleType"),g&&a.setStyle(f,"listStyleType",g),d.appendChild(f),f.appendChild(c),e(c.lastChild,f),!0))))},g=function(a){var b=d.getSelectedListItems(a);if(b.length){for(var e=c.createBookmark(a.selection.getRng(!0)),g=0;g<b.length&&(f(b[g])||0!==g);g++);return a.selection.setRng(c.resolveBookmark(e)),a.nodeChanged(),!0}};return{indentSelection:g}}),g("0",["1","2","3","4","5","6","7","8"],function(a,b,c,d,e,f,g,h){var i=function(a,b){return function(){var c=a.dom.getParent(a.selection.getStart(),"UL,OL,DL");return c&&c.nodeName===b}},j=function(a){a.on("BeforeExecCommand",function(b){var c,d=b.command.toLowerCase();if("indent"===d?f.indentSelection(a)&&(c=!0):"outdent"===d&&g.outdentSelection(a)&&(c=!0),c)return a.fire("ExecCommand",{command:b.command}),b.preventDefault(),!0}),a.addCommand("InsertUnorderedList",function(b,c){h.toggleList(a,"UL",c)}),a.addCommand("InsertOrderedList",function(b,c){h.toggleList(a,"OL",c)}),a.addCommand("InsertDefinitionList",function(b,c){h.toggleList(a,"DL",c)})},k=function(a){a.addQueryStateHandler("InsertUnorderedList",i(a,"UL")),a.addQueryStateHandler("InsertOrderedList",i(a,"OL")),a.addQueryStateHandler("InsertDefinitionList",i(a,"DL"))},l=function(a){a.on("keydown",function(b){9!==b.keyCode||c.metaKeyPressed(b)||a.dom.getParent(a.selection.getStart(),"LI,DT,DD")&&(b.preventDefault(),b.shiftKey?g.outdentSelection(a):f.indentSelection(a))})},m=function(a){var c=function(c){return function(){var e=this;a.on("NodeChange",function(a){var f=b.grep(a.parents,d.isListNode);e.active(f.length>0&&f[0].nodeName===c)})}},e=function(a,c){var d=a.settings.plugins?a.settings.plugins:"";return b.inArray(d.split(/[ ,]/),c)!==-1};e(a,"advlist")||(a.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:c("OL")}),a.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:c("UL")})),a.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(b){var c=b.control;a.on("nodechange",function(){for(var b=a.selection.getSelectedBlocks(),e=!1,f=0,g=b.length;!e&&f<g;f++){var h=b[f].nodeName;e="LI"===h&&d.isFirstChild(b[f])||"UL"===h||"OL"===h||"DD"===h}c.disabled(e)})}})};return a.add("lists",function(a){return m(a),e.setup(a),a.on("init",function(){j(a),k(a),l(a)}),{backspaceDelete:function(b){e.backspaceDelete(a,b)}}}),function(){}}),d("0")()}();