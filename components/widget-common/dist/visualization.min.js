var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Visualization={},RiseVision.Common.Visualization=function(){this.query=null,this.isVisualizationLoaded=!1},RiseVision.Common.Visualization.prototype.getData=function(i){this.url=i.url,this.refreshInterval=i.refreshInterval,this.timeout=i.timeout||30,this.callback=i.callback,this.params=i.params,i.queryString&&(this.queryString=i.queryString),this.isVisualizationLoaded?this.sendQuery():this.loadVisualizationAPI()},RiseVision.Common.Visualization.prototype.loadVisualizationAPI=function(){var i=this;google.load("visualization","1",{callback:function(){i.isVisualizationLoaded=!0,i.sendQuery()}})},RiseVision.Common.Visualization.prototype.sendQuery=function(){var i=this;null!==this.query&&this.query.abort(),this.query=new google.visualization.Query(this.url),this.query.setRefreshInterval(this.refreshInterval),this.query.setTimeout(this.timeout),this.queryString&&this.query.setQuery(this.queryString),this.query.send(function(s){i.onQueryExecuted(s)})},RiseVision.Common.Visualization.prototype.onQueryExecuted=function(i){null===i?this.callback(i,this.params):i.isError()?(console.log("Message: "+i.getMessage()),console.log("Detailed message: "+i.getDetailedMessage()),console.log("Reasons: "+i.getReasons()),this.callback(null,this.params)):this.callback(i.getDataTable(),this.params)};