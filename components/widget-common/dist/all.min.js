var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(t){"use strict";function e(){setTimeout(function(){l.style.backgroundImage="url("+t.background.image.url+m+"cb="+(new Date).getTime()+")",e()},c)}function i(){a=!0,t.background.useImage&&!u&&e(),s&&"function"==typeof s&&s()}function n(){var e;l=document.getElementById("background"),r=document.getElementById("backgroundStorage"),document.body.style.background=t.background.color,l?t.background.useImage?(l.className=t.background.image.position,l.className=t.background.image.scale?l.className+" scale-to-fit":l.className,u=0!==Object.keys(t.backgroundStorage).length,u?r?(r.addEventListener("rise-storage-response",function(t){a?t.detail&&t.detail.url&&t.detail.hasOwnProperty("changed")&&t.detail.changed&&(l.style.backgroundImage="url('"+t.detail.url.replace("'","\\'")+"')"):(t.detail&&t.detail.url&&(l.style.backgroundImage="url('"+t.detail.url.replace("'","\\'")+"')"),i())}),r.setAttribute("folder",t.backgroundStorage.folder),r.setAttribute("fileName",t.backgroundStorage.fileName),r.setAttribute("companyId",t.backgroundStorage.companyId),r.setAttribute("env",WIDGET_COMMON_CONFIG.STORAGE_ENV),r.go()):console.log("Missing element with id value of 'backgroundStorage'"):(e=t.background.image.url.split("?"),m=1===e.length?"?":"&",l.style.backgroundImage="url("+t.background.image.url+")",i())):i():console.log("Missing element with id value of 'background'")}function o(t){a?t&&"function"==typeof t&&t():(t&&(s=t),n())}var s=null,a=!1,l=null,r=null,c=9e5,u=!1,m="";return{init:o}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Utilities=function(){function t(t,e){var i="font-family:"+e.font.family+"; ",n="color: "+(e.color?e.color:e.forecolor)+"; ",o="font-size: "+(-1===e.size.indexOf("px")?e.size+"px; ":e.size+"; "),s="font-weight: "+(e.bold?"bold":"normal")+"; ",a="font-style: "+(e.italic?"italic":"normal")+"; ",l="text-decoration: "+(e.underline?"underline":"none")+"; ",r="background-color: "+(e.highlightColor?e.highlightColor:e.backcolor)+"; ";return"."+t+" {"+i+n+o+s+a+l+r+"}"}function e(t){for(var e=document.createElement("style"),i=0,n=t.length;n>i;i++)e.appendChild(document.createTextNode(t[i]));document.head.appendChild(e)}function i(i,s){i.forEach(function(i){i.class&&i.fontSetting&&e([t(i.class,i.fontSetting)]),i.fontSetting.font.type&&("custom"===i.fontSetting.font.type&&i.fontSetting.font.family&&i.fontSetting.font.url?n(i.fontSetting.font.family,i.fontSetting.font.url,s):"google"===i.fontSetting.font.type&&i.fontSetting.font.family&&o(i.fontSetting.font.family,s))})}function n(t,e,i){var n=null,o="font-family: "+t+"; src: url('"+e+"');";i=i||document,n=i.styleSheets[0],null!==n&&n.addRule("@font-face",o)}function o(t,e){var i,n=document.createElement("link");e=e||document,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),i=t.split(",")[0],i=i.replace(/'/g,""),n.setAttribute("href","https://fonts.googleapis.com/css?family="+i),null!==n&&e.getElementsByTagName("head")[0].appendChild(n)}function s(t){for(var e=t.length,i=[],n=0;e>n;n++)i[n]=new Image,i[n].src=t[n]}function a(t){for(var e,i=window.location.search.substring(1),n=i.split("&"),o=0;o<n.length;o++)if(e=n[o].split("="),e[0]==t)return decodeURIComponent(e[1]);return""}function l(t){var e="";switch(t){case 404:e="The file does not exist or cannot be accessed.";break;case 507:e="There is not enough disk space to save the file on Rise Cache.";break;default:e="There was a problem retrieving the file from Rise Cache."}return e}function r(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent}return{getQueryParameter:a,getFontCssStyle:t,addCSSRules:e,loadFonts:i,loadCustomFont:n,loadGoogleFont:o,preloadImages:s,getRiseCacheErrorMessage:l,unescapeHTML:r}}();var WIDGET_COMMON_CONFIG={AUTH_PATH_URL:"v1/widget/auth",LOGGER_CLIENT_ID:"1088527147109-6q1o2vtihn34292pjt4ckhmhck0rk0o7.apps.googleusercontent.com",LOGGER_CLIENT_SECRET:"nlZyrcPLg6oEwO9f9Wfn29Wh",LOGGER_REFRESH_TOKEN:"1/xzt4kwzE1H7W9VnKB8cAaCx6zb4Es4nKEoqaYHdTD15IgOrJDtdun6zK6XiATCKT",STORAGE_ENV:"prod",STORE_URL:"https://store-dot-rvaserver2.appspot.com/"},CollectionTimes=function(){function t(){function t(i,n){var o,s=6e4,a=new RiseVision.Common.Visualization,l=setTimeout(function(){t(i,n)},s);o={url:"http://contentfinancial2.appspot.com/info?codes="+i,refreshInterval:0,queryString:"select startTime, endTime, daysOfWeek, timeZoneOffset, updateInterval",callback:function(t,o){a=null,null!==t?(clearTimeout(o),e(i,t),n()):console.log("Error encountered loading collection times for: "+i)},params:l},a.getData(o)}function e(t,e){var n,o,s,a;if(null!==e){n=e.getNumberOfRows();for(var l=0;l<i.length;l++)if(i[l].instrument===t){a=e.getValue(0,3),o=e.getValue(0,0),s=e.getValue(0,1),i[l].collectionTimes={instrument:t,startTime:o.setTimezoneOffset(a),endTime:s.setTimezoneOffset(a),daysOfWeek:e.getFormattedValue(0,2).split(","),timeZoneOffset:a,isUpdated:!0};break}}}return{setIsUpdated:function(t,e){for(var n=0;n<i.length;n++)i[n].instrument===t&&null!==i[n].collectionTimes&&(i[n].collectionTimes.isUpdated=e)},addInstrument:function(e,n,o){for(var s=0,a=!1,l=!1;s<i.length;s++)if(i[s].instrument===e){null!==i[s].collectionTimes&&(Date.equals(Date.today(),n)||i[s].collectionTimes.isUpdated||(n=Date.today(),i[s].collectionTimes.startTime.addDays(1),i[s].collectionTimes.endTime.addDays(1),i[s].collectionTimes.isUpdated=!0),l=!0),a=!0;break}l?o(i[s].collectionTimes,n):(a||i.push({instrument:e,collectionTimes:null}),t(e,function(){o(i[s].collectionTimes,n)}))}}}var e=!1,i=[];return{getInstance:function(){return e||(e=t()),e}}}(),RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Financial=RiseVision.Common.Financial||{},RiseVision.Common.Financial.Helper={},RiseVision.Common.Financial.Helper=function(t){this.instruments=t},RiseVision.Common.Financial.Helper.prototype.setInstruments=function(t){this.instruments=t},RiseVision.Common.Financial.Helper.prototype.getInstruments=function(t,e){var i=this;if(t)return this.instruments.join("|");var n=(new Date).getDay(),o=e.length,s=[];return $.each(this.instruments,function(t,a){for(var l=0;o>l;l++)if(a===e[l].instrument){var r=e[l].startTime,c=e[l].endTime,u=e[l].daysOfWeek;$.each(u,function(e,o){return o==n?((new Date).between(r,c)&&s.push(i.instruments[t]),!1):void 0})}}),s.join("|")};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Financial=RiseVision.Common.Financial||{},RiseVision.Common.Financial.Historical={},RiseVision.Common.Financial.Historical.CollectionTimes={},RiseVision.Common.Financial.Historical=function(t,e,i){this.displayID=t?t:"preview",this.instrument=e,this.duration=i,this.isLoading=!0,this.updateInterval=6e4,this.now=Date.today(),this.url="https://contentfinancial2.appspot.com/data/historical?",this.historicalViz=new RiseVision.Common.Visualization,this.helper=new RiseVision.Common.Financial.Helper([this.instrument])},RiseVision.Common.Financial.Historical.prototype.setInstrument=function(t){this.isLoading=!0,this.instrument=t,this.helper.setInstruments([this.instrument])},RiseVision.Common.Financial.Historical.prototype.setDuration=function(t){this.duration=t},RiseVision.Common.Financial.Historical.prototype.setIsUpdated=function(t){CollectionTimes.getInstance().setIsUpdated(this.instrument,t)},RiseVision.Common.Financial.Historical.prototype.getHistoricalData=function(t,e,i){var n=this,o="select "+t.join()+" ORDER BY tradeTime",s="";i&&(i.sortOrder&&"desc"===i.sortOrder&&(o+=" desc"),i.limit&&(o+=" LIMIT "+i.limit)),CollectionTimes.getInstance().addInstrument(this.instrument,this.now,function(a,l){n.now=l,s=n.helper.getInstruments(n.isLoading,[a]),s?(i={url:n.url+"id="+n.displayID+"&code="+n.instrument+"&kind="+n.duration,refreshInterval:0,queryString:o,callback:function(t){n.onHistoricalDataLoaded(t,a,e)}},n.getHistoricalDataTimer=setTimeout(function(){n.getHistoricalData(t,e,i)},n.updateInterval),n.historicalViz.getData(i)):e(null)})},RiseVision.Common.Financial.Historical.prototype.onHistoricalDataLoaded=function(t,e,i){var n=0;null!==t?(clearTimeout(this.getHistoricalDataTimer),this.historicalData=t,n=t.getNumberOfRows(),this.isLoading=0===n||1===n&&"0"===t.getFormattedValue(0,0)?!0:!1,null!==this.historicalData?i({data:this.historicalData,collectionData:e}):i({collectionData:e})):(console.log("Error encountered loading historical data for: "),console.log(this))};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Financial=RiseVision.Common.Financial||{},RiseVision.Common.Financial.RealTime={},RiseVision.Common.Financial.RealTime=function(t,e,i){this.instruments=e,this.isLoading=!0,this.conditions={},this.collectionTimes=[],this.updateInterval=6e4,this.now=Date.today(),this.url="https://contentfinancial2.appspot.com/data?",this.logosURL="https://s3.amazonaws.com/risecontentlogos/financial/",this.viz=new RiseVision.Common.Visualization,this.helper=new RiseVision.Common.Financial.Helper(this.instruments),this._getDisplayId=function(){return t&&i.isAuthorized()?t:"preview"},this._saveCollectionTimes=function(){var t;if(t=this.data.getNumberOfRows(),1===this.instruments.length&&this.data.getNumberOfRows()>1)this._saveCollectionTime(0);else{for(var e=0;t>e;e++)this._saveCollectionTime(e);0===this.collectionTimes.length&&console.log(this.collectionTimes)}},this._saveCollectionTime=function(t){var e,i,n;"INVALID_SYMBOL"!==this.data.getValue(t,0)&&("..."===this.data.getValue(t,0)?this.isLoading=!0:(e=this.data.getValue(t,this.startTimeIndex+3),i=this.data.getValue(t,this.startTimeIndex),n=this.data.getValue(t,this.startTimeIndex+1),i&&n&&"N/P"!==e&&this.collectionTimes.push({instrument:this.instruments[t],startTime:i.setTimezoneOffset(e),endTime:n.setTimezoneOffset(e),daysOfWeek:this.data.getFormattedValue(t,this.startTimeIndex+2).split(",")})))}},RiseVision.Common.Financial.RealTime.prototype.setInstruments=function(t){t=t.split(","),$.each(t,function(e){t[e]=$.trim(t[e])}),this.isLoading=!0,this.collectionTimes=[],this.instruments=t,this.helper.setInstruments(this.instruments)},RiseVision.Common.Financial.RealTime.prototype.getData=function(t,e,i,n){var o=this,s=!1,a=0,l="select instrument",r="";if(this.dataFields={},this.dataFields.instrument=0,this.startTimeIndex=1,this.isLoading&&(this.callback=n),$.each(t,function(t,e){s=!1,"instrument"!==e&&($.each(o.dataFields,function(t){return t===e?(s=!0,!1):void 0}),s||(l+=", "+e,o.dataFields[e]=a+1,a++,o.startTimeIndex++))}),this.logoCount=0,l+=", startTime, endTime, daysOfWeek, timeZoneOffset",!Date.equals(Date.today(),this.now)){this.now=Date.today();for(var c=0;c<this.collectionTimes.length;c++)this.collectionTimes[c].startTime.addDays(1),this.collectionTimes[c].endTime.addDays(1)}if(r=this.helper.getInstruments(this.isLoading,this.collectionTimes)){var u={url:this.url+"id="+this._getDisplayId()+"&codes="+r,refreshInterval:0,queryString:l,callback:function(t){o.onRealTimeDataLoaded(t,e,i)}};this.getDataTimer=setTimeout(function(){o.getData(t,e,i,n)},this.updateInterval),this.viz.getData(u)}else n(null)},RiseVision.Common.Financial.RealTime.prototype.onRealTimeDataLoaded=function(t,e,i){null!==t?(clearTimeout(this.getDataTimer),this.data=t,this.isLoading?(this.isLoading=!1,0===this.collectionTimes.length&&this._saveCollectionTimes(),e?this.loadLogos():this.callback&&this.callback(this.data,this.logoURLs)):e&&i?this.loadLogos():this.callback&&this.callback(this.data,this.logoURLs)):(console.log("Error encountered loading real-time data for: "),console.log(this.instruments[0]))},RiseVision.Common.Financial.RealTime.prototype.loadLogos=function(){var t=this.data.getNumberOfRows();this.logoCount=0,this.urls=[],this.logoURLs=[];for(var e=0;t>e;e++)this.urls.push(this.logosURL+this.data.getFormattedValue(e,0)+".svg");this.loadLogo(this.urls.length)},RiseVision.Common.Financial.RealTime.prototype.loadLogo=function(t){var e,i=this;e=new Image,e.onload=function(){i.logoURLs.push(e.src),i.onLogoLoaded(t)},e.onerror=function(){i.logoURLs.push(null),i.onLogoLoaded(t)},e.src=this.urls[this.logoCount]},RiseVision.Common.Financial.RealTime.prototype.onLogoLoaded=function(t){this.logoCount++,t--,0===t?this.callback&&this.callback(this.data,this.logoURLs):this.loadLogo(t)},RiseVision.Common.Financial.RealTime.prototype.checkSigns=function(t){var e,i,n=0,o=0,s=[];for(n=0,o=this.data.getNumberOfRows();o>n;n++)e=this.data.getValue(n,this.dataFields[t]),isNaN(e)&&(e=e.replace(/[^0-9\.-]+/g,""),e=parseFloat(e)),isNaN(e)||(i=e>=0?1:-1,s.push(i));return s},RiseVision.Common.Financial.RealTime.prototype.compare=function(t){var e=this,i=0,n=0,o=0,s=0,a=[],l=!1;if(this.conditions[t])for(i=0,n=this.data.getNumberOfRows();n>i;i++)o=this.data.getValue(i,this.dataFields[t]),l=!1,$.each(this.conditions[t],function(t,n){return n.instrument===e.data.getValue(i,0)?(s=n.value,isNaN(o)&&(o=o.replace(/[^0-9\.-]+/g,""),o=parseFloat(o)),isNaN(s)&&(s=s.replace(/[^0-9\.-]+/g,""),s=parseFloat(s)),isNaN(o)||isNaN(s)||(o!=s?o>s?a.push(1):a.push(-1):a.push(0)),l=!0,!1):void 0}),l||a.push(0);return this.saveBeforeValues([t]),a},RiseVision.Common.Financial.RealTime.prototype.saveBeforeValues=function(t){var e=this;$.each(t,function(t,i){e.conditions[i]=[],e.saveBeforeValue(i,e.dataFields[i])})},RiseVision.Common.Financial.RealTime.prototype.saveBeforeValue=function(t,e){for(var i=0,n=this.data.getNumberOfRows();n>i;i++)this.conditions[t].push({instrument:this.data.getValue(i,0),value:this.data.getValue(i,e)})};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.LoggerUtils=function(){"use strict";function t(t,e){var n=null;t.event?(n=t,n.file_url&&(n.file_format=i(n.file_url)),n.company_id=l,n.display_id=a,e(n)):e(n)}function e(){var t=new Date,e=t.getUTCFullYear(),i=t.getUTCMonth()+1,n=t.getUTCDate();return 10>i&&(i="0"+i),10>n&&(n="0"+n),e+i+n}function i(t){var e,i=/[?#&]/;return t&&"string"==typeof t?(e=t.substr(t.lastIndexOf(".")+1),i.test(e)&&(e=e.substr(0,-1!==e.indexOf("?")?e.indexOf("?"):e.length),e=e.substr(0,-1!==e.indexOf("#")?e.indexOf("#"):e.length),e=e.substr(0,-1!==e.indexOf("&")?e.indexOf("&"):e.length)),e.toLowerCase()):null}function n(t){var i={kind:"bigquery#tableDataInsertAllRequest",skipInvalidRows:!1,ignoreUnknownValues:!1,templateSuffix:e(),rows:[{insertId:""}]},n=JSON.parse(JSON.stringify(i));return n.rows[0].insertId=Math.random().toString(36).substr(2).toUpperCase(),n.rows[0].json=JSON.parse(JSON.stringify(t)),n.rows[0].json.ts=(new Date).toISOString(),n}function o(e,i){t(i,function(t){null!==t&&RiseVision.Common.Logger.log(e,t)})}function s(t,e){l=t,a=e}var a="",l="";return{getInsertData:n,getFileFormat:i,logEvent:o,setIds:s}}(),RiseVision.Common.Logger=function(t){"use strict";function e(t){var e=new XMLHttpRequest;return new Date-c<358e4?t({}):(e.open("POST",o,!0),e.onloadend=function(){var i=JSON.parse(e.response);t({token:i.access_token,refreshedAt:new Date})},e.send(),void 0)}function i(t){return a&&r===t}function n(n,o){function m(e){var i,a,l=new XMLHttpRequest;a=s.replace("TABLE_ID",n),c=e.refreshedAt||c,u=e.token||u,i=t.getInsertData(o),l.open("POST",a,!0),l.setRequestHeader("Content-Type","application/json"),l.setRequestHeader("Authorization","Bearer "+u),o.cb&&"function"==typeof o.cb&&(l.onloadend=function(){o.cb(l.response)}),l.send(JSON.stringify(i))}if(!(!n||!o||o.hasOwnProperty("event")&&!o.event||o.hasOwnProperty("event")&&i(o.event)))return a=!0,r=o.event,setTimeout(function(){a=!1},l),e(m)}var o="https://www.googleapis.com/oauth2/v3/token?client_id="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_ID+"&client_secret="+WIDGET_COMMON_CONFIG.LOGGER_CLIENT_SECRET+"&refresh_token="+WIDGET_COMMON_CONFIG.LOGGER_REFRESH_TOKEN+"&grant_type=refresh_token",s="https://www.googleapis.com/bigquery/v2/projects/client-side-events/datasets/Widget_Events/tables/TABLE_ID/insertAll",a=!1,l=1e3,r="",c=0,u="";return{log:n}}(RiseVision.Common.LoggerUtils);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Message=function(t,e){"use strict";function i(){try{e.style.height=t.style.height}catch(i){console.warn("Can't initialize Message - ",i.message)}}function n(){if(s){for(;e.firstChild;)e.removeChild(e.firstChild);e.style.display="none",t.style.visibility="visible",s=!1}}function o(i){var n,o=document.createDocumentFragment();s?(n=e.querySelector(".message"),n.innerHTML=i):(t.style.visibility="hidden",e.style.display="block",n=document.createElement("p"),n.innerHTML=i,n.setAttribute("class","message"),o.appendChild(n),e.appendChild(o),s=!0)}var s=!1;return i(),{hide:n,show:o}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function t(t){var e=new XMLHttpRequest;t&&"function"==typeof t&&(e.open("GET",n+"ping?callback=_",!0),e.onreadystatechange=function(){try{4===e.readyState&&(o=!0,200===e.status?(s=!0,t(!0,e.responseText)):(console.debug("Rise Cache is not running"),s=!1,t(!1,null)))}catch(i){console.debug("Caught exception: ",i.description)}},e.send())}function e(t,e,i){function a(){var e,o,a;s?e=i?n+"?url="+encodeURIComponent(t):n+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(t):i?e=t:(o=t.split("?"),a=1===o.length?"?":"&",e=t+a+"cb="+(new Date).getTime()),l("HEAD",e)}function l(t,i){var n=new XMLHttpRequest,o={xhr:n,url:i};s?(n.open(t,i,!0),n.addEventListener("loadend",function(){var s=n.status||0;s>=200&&300>s?e(o):"HEAD"===t?l("GET",i):e(o,new Error("The request failed with status code: "+s))}),n.send()):e(o)}if(t&&e&&"function"==typeof e)return o?a():this.ping(a)}function i(t){return t&&"function"==typeof t?o?(t(s),void 0):this.ping(function(){t(s)}):void 0}var n="//localhost:9494/",o=!1,s=!1;return{getFile:e,isRiseCacheRunning:i,ping:t}}();var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function e(){for(var t=null,e=[],s=[],a=[],l=0;l<O.length;l++)O[l].fontStyle&&O[l].fontStyle.font.type&&"google"===O[l].fontStyle.font.type&&(t=O[l].fontStyle.font.family.split(","),e.push(t[0]));for(l=0;l<O.length;l++)O[l].fontStyle&&O[l].fontStyle.font.type&&"custom"===O[l].fontStyle.font.type&&(s.push(O[l].fontStyle.font.family),a.push(O[l].fontStyle.font.url));s.length>0?i(s,a,function(){e.length>0?n(e,o):o()}):e.length>0?n(e,o):o()}function i(t,e,i){WebFont.load({custom:{families:t,urls:e},active:function(){i()},inactive:function(){i()},timeout:2e3})}function n(t,e){WebFont.load({google:{families:t},active:function(){e()},inactive:function(){e()},timeout:2e3})}function o(){s(),TweenLite.ticker.addEventListener("tick",u),v.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function s(){a(),m(),V.width=w,a(),m()}function a(){w=0;for(var t=0;t<O.length;t++)O[t].separator?l(O[t]):r(O[t])}function l(t){var e=V.height/2,i=t.size/2;b.save(),b.fillStyle=t.color,b.beginPath(),b.arc(w+i,e,i,0,2*Math.PI),b.fill(),w+=t.size+10,b.restore()}function r(t){var e,i={};t&&(i.text=L.unescapeHTML(t.text),t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(i.font=e.font.family),e.size&&(i.size=e.size),e.forecolor&&(i.foreColor=e.forecolor),e.bold&&(i.bold=e.bold),e.italic&&(i.italic=e.italic)),c(i))}function c(t){var e="";b.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),b.font=e,b.fillStyle=t.foreColor,b.textBaseline="middle",b.translate(0,V.height/2),b.fillText(t.text,w,0),w+=b.measureText(t.text).width+10,b.restore()}function u(){T.clearRect(0,0,v.width,v.height),T.drawImage(V,T.xpos,0)}function m(){var t=0,e=0;if(k=w,O.length>0)for(;t<v.width;)O[e].separator?l(O[e]):r(O[e]),t=w-k,e=e===O.length-1?0:e+1}function d(){var e;if(t.transition&&t.transition.speed)switch(t.transition.speed){case"slow":e=100;break;case"medium":e=150;break;case"fast":e=200;break;default:e=150}return k/e}function h(){I=null,T.xpos=0,v.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function f(){V=document.createElement("canvas"),V.id="secondary",V.style.display="none",b=g(V),document.body.appendChild(V)}function g(e){var i=e.getContext("2d");return e.width=t.width,e.height=t.height,i.xpos=0,i}function p(t){O=t,v=document.getElementById("scroller"),T=g(v),f(),e()}function R(t){O=t,s()}function y(){I||(I=TweenLite.to(T,d(),{xpos:-k,ease:Linear.easeNone,onComplete:h})),I.play()}function C(){I&&I.pause()}var v=null,T=null,V=null,b=null,I=null,O=[],w=0,k=0,L=RiseVision.Common.Utilities;return{init:p,play:y,pause:C,refresh:R}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Store=RiseVision.Common.Store||{},RiseVision.Common.Store.Auth={},RiseVision.Common.Store.Auth=function(){function t(t){i=document.createElement("div"),i.className="overlay",document.body.appendChild(i),n=document.createElement("div"),n.className="auth-warning",n.innerHTML=t,n=document.body.appendChild(n)}function e(){i&&n&&(n.parentNode.removeChild(n),i.parentNode.removeChild(i))}var i,n,o=36e5;this.callback=null,this.authorized=!1,this.isAuthorized=function(){return this.authorized},this.checkForDisplay=function(t,e,i){this.callback=i,this.url=WIDGET_COMMON_CONFIG.STORE_URL+WIDGET_COMMON_CONFIG.AUTH_PATH_URL+"?id="+t+"&pc="+e,this.callApi()},this.checkForCompany=function(t,e,i){this.callback=i,this.url=WIDGET_COMMON_CONFIG.STORE_URL+WIDGET_COMMON_CONFIG.AUTH_PATH_URL+"?cid="+t+"&pc="+e,this.callApi()},this.callApi=function(){var t=this;$.ajax({dataType:"json",url:this.url,success:function(e,i){t.onSuccess(e,i)},error:function(){t.onError()}})},this.onSuccess=function(i){if(i&&i.authorized){this.authorized=!0,e();var n=new Date(i.expiry).getTime()-(new Date).getTime()-o;setTimeout(this.callApi,n)}else i&&!i.authorized?(this.authorized=!1,t("Product not authorized."),setTimeout(this.callApi,o)):setTimeout(this.callApi,o);this.callback&&this.callback(this.authorized)},this.onError=function(){this.authorized=!1,t("Cannot connect to Store for authorization."),setTimeout(this.callApi,o),this.callback&&this.callback(this.authorized)}};var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Visualization={},RiseVision.Common.Visualization=function(){this.query=null,this.isVisualizationLoaded=!1},RiseVision.Common.Visualization.prototype.getData=function(t){this.url=t.url,this.refreshInterval=t.refreshInterval,this.timeout=t.timeout||30,this.callback=t.callback,this.params=t.params,t.queryString&&(this.queryString=t.queryString),this.isVisualizationLoaded?this.sendQuery():this.loadVisualizationAPI()},RiseVision.Common.Visualization.prototype.loadVisualizationAPI=function(){var t=this;google.load("visualization","1",{callback:function(){t.isVisualizationLoaded=!0,t.sendQuery()}})},RiseVision.Common.Visualization.prototype.sendQuery=function(){var t=this;null!==this.query&&this.query.abort(),this.query=new google.visualization.Query(this.url),this.query.setRefreshInterval(this.refreshInterval),this.query.setTimeout(this.timeout),this.queryString&&this.query.setQuery(this.queryString),this.query.send(function(e){t.onQueryExecuted(e)})},RiseVision.Common.Visualization.prototype.onQueryExecuted=function(t){null===t?this.callback(t,this.params):t.isError()?(console.log("Message: "+t.getMessage()),console.log("Detailed message: "+t.getDetailedMessage()),console.log("Reasons: "+t.getReasons()),this.callback(null,this.params)):this.callback(t.getDataTable(),this.params)};