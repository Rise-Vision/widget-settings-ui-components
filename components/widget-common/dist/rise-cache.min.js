var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.RiseCache=function(){"use strict";function e(e){var n=new XMLHttpRequest,t=this;e&&"function"==typeof e&&(c?n.open("GET",s,!0):n.open("GET",s+"ping?callback=_",!0),n.onreadystatechange=function(){try{if(4===n.readyState)if(r=!0,200===n.status)a=!0,e(!0,n.responseText);else{if(404===n.status)return c=!0,t.ping(e);console.debug("Rise Cache is not running"),a=!1,e(!1,null)}}catch(i){console.debug("Caught exception: ",i.description)}},n.send())}function n(e,n,t){function i(){var n,i,r;a?n=c?s+"files?url="+encodeURIComponent(e):t?s+"?url="+encodeURIComponent(e):s+"cb="+(new Date).getTime()+"?url="+encodeURIComponent(e):t?n=e:(i=e.split("?"),r=1===i.length?"?":"&",n=e+r+"cb="+(new Date).getTime()),o("HEAD",n)}function o(e,t){var i=new XMLHttpRequest,s={xhr:i,url:t};a?(i.open(e,t,!0),i.addEventListener("loadend",function(){var r=i.status||0;r>=200&&300>r?n(s):"HEAD"===e?o("GET",t):n(s,new Error("The request failed with status code: "+r))}),i.send()):n(s)}if(e&&n&&"function"==typeof n)return r?i():this.ping(i)}function t(e){var n="";switch(e){case 502:n="There was a problem retrieving the file.";break;case 504:n="Unable to download the file. The server is not responding.";break;case 507:n="There is not enough disk space to save the file on Rise Cache.";break;case 534:n="The file does not exist or cannot be accessed.";break;default:n=""}return n}function i(e){return e&&"function"==typeof e?r?(e(a),void 0):this.ping(function(){e(a)}):void 0}function o(e){return e&&"function"==typeof e?r?(e(c),void 0):this.ping(function(){e(c)}):void 0}var s="//localhost:9494/",r=!1,a=!1,c=!1;return{getErrorMessage:t,getFile:n,isRiseCacheRunning:i,isV2Running:o,ping:e}}();