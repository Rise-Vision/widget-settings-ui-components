var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(e){"use strict";function t(){n(),c(),k>T?(R=!0,y.width=T,i()):y.width=k,n(),c()}function i(){var e=new Event("scroller-oversized-canvas");x.dispatchEvent(e)}function n(){k=0;for(var e=0;e<C.length;e++)C[e].separator?o(C[e]):l(C[e])}function o(e){var t=y.height/2,i=e.size/2;z.save(),z.fillStyle=e.color,z.beginPath(),z.arc(k+i,t,i,0,2*Math.PI),z.fill(),k+=e.size+10,z.restore()}function l(e,t){var i,n={};e&&(n.text=S.unescapeHTML(e.text),e.fontStyle&&(i=e.fontStyle,i.font&&i.font.family&&(n.font=i.font.family),i.size&&(n.size=i.size),i.forecolor&&(n.foreColor=i.forecolor),i.bold&&(n.bold=i.bold),i.italic&&(n.italic=i.italic),i.backcolor&&t&&(n.backcolor=i.backcolor)),t?a(n):s(n))}function s(e){var t="";z.save(),e.bold&&(t="bold "),e.italic&&(t+="italic "),e.size&&(t+=e.size+" "),e.font&&(t+=e.font),z.font=t,z.fillStyle=e.foreColor,z.textBaseline="middle",z.translate(0,y.height/2),z.fillText(e.text,k,0),k+=z.measureText(e.text).width+10,z.restore()}function a(e){var t,i,n="";z.save(),e.bold&&(n="bold "),e.italic&&(n+="italic "),e.size&&(n+=e.size+" "),e.font&&(n+=e.font),z.font=n,z.textBaseline="middle",t=z.measureText("  ...  ").width,i=e.size?e.size.indexOf("px")>0?parseInt(e.size.slice(0,e.size.indexOf("px")),10):e.size:10,z.translate(0,y.height/2),z.fillStyle="transparent"===e.backcolor?"#FFF":e.backcolor,z.fillRect(T-t,-(i/2),t,i),z.fillStyle=e.foreColor,z.fillText("  ...  ",T-t,0),z.restore()}function r(){w.clearRect(0,0,x.width,x.height),w.drawImage(y,w.xpos,0)}function c(){var e=0,t=0,i=0;if(E=R?T:k,C.length>0){for(;e<x.width;)C[i].separator?o(C[i]):l(C[i]),e=k-E,t=i,i=t===C.length-1?0:t+1;R&&l(C[t],!0)}}function f(){var t;if(e.transition&&e.transition.speed)switch(e.transition.speed){case"slow":t=100;break;case"medium":t=150;break;case"fast":t=200;break;default:t=150}return E/t}function d(){g=null,w.xpos=0,x.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function u(){y=document.createElement("canvas"),y.id="secondary",y.style.display="none",z=h(y),document.body.appendChild(y)}function h(t){var i=t.getContext("2d");return t.width=e.width,t.height=e.height,i.xpos=0,i}function m(e){C=e,x=document.getElementById("scroller"),w=h(x),u(),t(),TweenLite.ticker.addEventListener("tick",r),x.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function p(e){C=e,R=!1,t()}function v(){g||(g=TweenLite.to(w,f(),{xpos:-E,ease:Linear.easeNone,onComplete:d})),g.play()}function b(){g&&g.pause()}var x=null,w=null,y=null,z=null,g=null,C=[],k=0,E=0,R=!1,S=RiseVision.Common.Utilities,T=32767;return{init:m,play:v,pause:b,refresh:p}};