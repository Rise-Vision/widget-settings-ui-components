var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function e(){for(var t=0;t<w.length;t++)w[t].fontStyle.font.type&&"custom"===w[t].fontStyle.font.type&&R.push({family:w[t].fontStyle.font.family,url:w[t].fontStyle.font.url})}function n(){for(var t=[],e=[],n=0;n<R.length;n++)t.push(R[n].family),e.push(R[n].url);WebFont.load({custom:{families:t,urls:e},active:function(){o()},inactive:function(){o()},timeout:2e3})}function o(){i(),r(),g.width=C,i(),r(),TweenLite.ticker.addEventListener("tick",s)}function i(){C=0;for(var t=0;t<w.length;t++)l(w[t])}function l(t){var e,n={};t&&(n.text=V.unescapeHTML(t.text)+" ",t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(n.font=e.font.family),e.size&&(n.size=e.size),e.forecolor&&(n.foreColor=e.forecolor),e.bold&&(n.bold=e.bold),e.italic&&(n.italic=e.italic)),f(n))}function f(t){var e="";x.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),x.font=e,x.fillStyle=t.foreColor,x.translate(0,g.height/2),x.fillText(t.text,C,0),C+=x.measureText(t.text).width,x.restore()}function s(){v.clearRect(0,0,p.width,p.height),v.drawImage(g,v.xpos,0)}function r(){var t=0,e=0;if(S=C,w.length>0)for(;t<p.width;)l(w[e]),t=C-S,e=e===w.length-1?0:e+1}function a(){return S/p.width*10}function u(){v.xpos=0,p.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function c(){g=document.createElement("canvas"),g.id="secondary",g.style.display="none",x=d(g),document.body.appendChild(g)}function d(e){var n=e.getContext("2d");return e.width=t.getInt("rsW"),e.height=t.getInt("rsH"),n.xpos=0,n}function m(t){w=t,p=document.getElementById("scroller"),v=d(p),c(),e(),n()}function h(){b||(b=TweenLite.to(v,a(),{xpos:-S,ease:Linear.easeNone,onComplete:u})),b.play()}function y(){b.pause()}var p=null,v=null,g=null,x=null,b=null,w=[],C=0,S=0,R=[],V=RiseVision.Common.Utilities;return{init:m,play:h,pause:y}};