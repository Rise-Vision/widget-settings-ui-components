var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function e(){for(var t=null,e=[],l=[],f=[],s=0;s<E.length;s++)E[s].fontStyle&&E[s].fontStyle.font.type&&"google"===E[s].fontStyle.font.type&&(t=E[s].fontStyle.font.family.split(","),e.push(t[0]));for(s=0;s<E.length;s++)E[s].fontStyle&&E[s].fontStyle.font.type&&"custom"===E[s].fontStyle.font.type&&(l.push(E[s].fontStyle.font.family),f.push(E[s].fontStyle.font.url));l.length>0?n(l,f,function(){e.length>0?o(e,i):i()}):e.length>0?o(e,i):i()}function n(t,e,n){WebFont.load({custom:{families:t,urls:e},active:function(){n()},inactive:function(){n()},timeout:2e3})}function o(t,e){WebFont.load({google:{families:t},active:function(){e()},inactive:function(){e()},timeout:2e3})}function i(){l(),TweenLite.ticker.addEventListener("tick",c),S.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function l(){f(),u(),x.width=R,f(),u()}function f(){R=0;for(var t=0;t<E.length;t++)E[t].separator?s(E[t]):a(E[t])}function s(t){var e=x.height/2,n=t.size/2;C.save(),C.fillStyle=t.color,C.beginPath(),C.arc(R+n,e,n,0,2*Math.PI),C.fill(),R+=t.size+10,C.restore()}function a(t){var e,n={};t&&(n.text=k.unescapeHTML(t.text),t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(n.font=e.font.family),e.size&&(n.size=e.size),e.forecolor&&(n.foreColor=e.forecolor),e.bold&&(n.bold=e.bold),e.italic&&(n.italic=e.italic)),r(n))}function r(t){var e="";C.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),C.font=e,C.fillStyle=t.foreColor,C.textBaseline="middle",C.translate(0,x.height/2),C.fillText(t.text,R,0),R+=C.measureText(t.text).width+10,C.restore()}function c(){w.clearRect(0,0,S.width,S.height),w.drawImage(x,w.xpos,0)}function u(){var t=0,e=0;if(V=R,E.length>0)for(;t<S.width;)E[e].separator?s(E[e]):a(E[e]),t=R-V,e=e===E.length-1?0:e+1}function d(){var e;if(t.transition&&t.transition.speed)switch(t.transition.speed){case"slow":e=100;break;case"medium":e=150;break;case"fast":e=200;break;default:e=150}return V/e}function h(){z=null,w.xpos=0,S.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function m(){x=document.createElement("canvas"),x.id="secondary",x.style.display="none",C=y(x),document.body.appendChild(x)}function y(e){var n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.xpos=0,n}function p(t){E=t,S=document.getElementById("scroller"),w=y(S),m(),e()}function v(t){E=t,l()}function g(){z||(z=TweenLite.to(w,d(),{xpos:-V,ease:Linear.easeNone,onComplete:h})),z.play()}function b(){z&&z.pause()}var S=null,w=null,x=null,C=null,z=null,E=[],R=0,V=0,k=RiseVision.Common.Utilities;return{init:p,play:g,pause:b,refresh:v}};