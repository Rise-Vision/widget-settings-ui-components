var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(t){"use strict";function e(){for(var t=null,e=[],l=[],f=[],s=0;s<C.length;s++)C[s].fontStyle.font.type&&"google"===C[s].fontStyle.font.type&&(t=C[s].fontStyle.font.family.split(","),e.push(t[0]));for(s=0;s<C.length;s++)C[s].fontStyle.font.type&&"custom"===C[s].fontStyle.font.type&&(l.push(C[s].fontStyle.font.family),f.push(C[s].fontStyle.font.url));l.length>0?n(l,f,function(){e.length>0?o(e,i):i()}):e.length>0?o(e,i):i()}function n(t,e,n){WebFont.load({custom:{families:t,urls:e},active:function(){n()},inactive:function(){n()},timeout:2e3})}function o(t,e){WebFont.load({google:{families:t},active:function(){e()},inactive:function(){e()},timeout:2e3})}function i(){l(),c(),b.width=S,l(),c(),TweenLite.ticker.addEventListener("tick",a),v.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function l(){S=0;for(var t=0;t<C.length;t++)f(C[t])}function f(t){var e,n={};t&&(n.text=R.unescapeHTML(t.text)+" ",t.fontStyle&&(e=t.fontStyle,e.font&&e.font.family&&(n.font=e.font.family),e.size&&(n.size=e.size),e.forecolor&&(n.foreColor=e.forecolor),e.bold&&(n.bold=e.bold),e.italic&&(n.italic=e.italic)),s(n))}function s(t){var e="";w.save(),t.bold&&(e="bold "),t.italic&&(e+="italic "),t.size&&(e+=t.size+" "),t.font&&(e+=t.font),w.font=e,w.fillStyle=t.foreColor,w.translate(0,b.height/2),w.fillText(t.text,S,0),S+=w.measureText(t.text).width,w.restore()}function a(){g.clearRect(0,0,v.width,v.height),g.drawImage(b,g.xpos,0)}function c(){var t=0,e=0;if(E=S,C.length>0)for(;t<v.width;)f(C[e]),t=S-E,e=e===C.length-1?0:e+1}function u(){var e;if(t.transition&&t.transition.speed)switch(t.transition.speed){case"slow":e=100;break;case"medium":e=150;break;case"fast":e=200;break;default:e=150}return E/e}function r(){x=null,g.xpos=0,v.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function d(){b=document.createElement("canvas"),b.id="secondary",b.style.display="none",w=m(b),document.body.appendChild(b)}function m(e){var n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.xpos=0,n}function h(t){C=t,v=document.getElementById("scroller"),g=m(v),d(),e()}function y(){x||(x=TweenLite.to(g,u(),{xpos:-E,ease:Linear.easeNone,onComplete:r})),x.play()}function p(){x.pause()}var v=null,g=null,b=null,w=null,x=null,C=[],S=0,E=0,R=RiseVision.Common.Utilities;return{init:h,play:y,pause:p}};