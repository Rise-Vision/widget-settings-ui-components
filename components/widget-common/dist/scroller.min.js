var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Scroller=function(e){"use strict";function t(){i(),r(),E>V&&n(),y.width=E,i(),r()}function n(){var e=new Event("scroller-oversized-canvas");b.dispatchEvent(e)}function i(){E=0;for(var e=0;e<C.length;e++)C[e].separator?o(C[e]):s(C[e])}function o(e){var t=y.height/2,n=e.size/2;g.save(),g.fillStyle=e.color,g.beginPath(),g.arc(E+n,t,n,0,2*Math.PI),g.fill(),E+=e.size+10,g.restore()}function s(e){var t,n={};e&&(n.text=R.unescapeHTML(e.text),e.fontStyle&&(t=e.fontStyle,t.font&&t.font.family&&(n.font=t.font.family),t.size&&(n.size=t.size),t.forecolor&&(n.foreColor=t.forecolor),t.bold&&(n.bold=t.bold),t.italic&&(n.italic=t.italic)),l(n))}function l(e){var t="";g.save(),e.bold&&(t="bold "),e.italic&&(t+="italic "),e.size&&(t+=e.size+" "),e.font&&(t+=e.font),g.font=t,g.fillStyle=e.foreColor,g.textBaseline="middle",g.translate(0,y.height/2),g.fillText(e.text,E,0),E+=g.measureText(e.text).width+10,g.restore()}function a(){w.clearRect(0,0,b.width,b.height),w.drawImage(y,w.xpos,0)}function r(){var e=0,t=0;if(z=E,C.length>0)for(;e<b.width;)C[t].separator?o(C[t]):s(C[t]),e=E-z,t=t===C.length-1?0:t+1}function c(){var t;if(e.transition&&e.transition.speed)switch(e.transition.speed){case"slow":t=100;break;case"medium":t=150;break;case"fast":t=200;break;default:t=150}return z/t}function f(){x=null,w.xpos=0,b.dispatchEvent(new CustomEvent("done",{bubbles:!0}))}function u(){y=document.createElement("canvas"),y.id="secondary",y.style.display="none",g=d(y),document.body.appendChild(y)}function d(t){var n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.xpos=0,n}function h(e){C=e,b=document.getElementById("scroller"),w=d(b),u(),t(),TweenLite.ticker.addEventListener("tick",a),b.dispatchEvent(new CustomEvent("ready",{bubbles:!0}))}function m(e){C=e,t()}function v(){x||(x=TweenLite.to(w,c(),{xpos:-z,ease:Linear.easeNone,onComplete:f})),x.play()}function p(){x&&x.pause()}var b=null,w=null,y=null,g=null,x=null,C=[],E=0,z=0,R=RiseVision.Common.Utilities,V=32767;return{init:h,play:v,pause:p,refresh:m}};