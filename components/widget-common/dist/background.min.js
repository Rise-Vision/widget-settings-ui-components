var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function n(){setTimeout(function(){u.style.backgroundImage="url("+e.background.image.url+s+"cb="+(new Date).getTime()+")",n()},c)}function o(){r=!0,e.background.useImage&&!g&&n(),i&&"function"==typeof i&&i()}function t(){var n;u=document.getElementById("background"),l=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,u?e.background.useImage?(u.className=e.background.image.position,u.className=e.background.image.scale?u.className+" scale-to-fit":u.className,g=0!==Object.keys(e.backgroundStorage).length,g?l?(l.addEventListener("rise-storage-response",function(e){r?e.detail&&e.detail.url&&e.detail.hasOwnProperty("changed")&&e.detail.changed&&(u.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"):(e.detail&&e.detail.url&&(u.style.backgroundImage="url('"+e.detail.url.replace("'","\\'")+"')"),o())}),l.setAttribute("folder",e.backgroundStorage.folder),l.setAttribute("fileName",e.backgroundStorage.fileName),l.setAttribute("companyId",e.backgroundStorage.companyId),l.setAttribute("env",WIDGET_COMMON_CONFIG.STORAGE_ENV),l.go()):console.log("Missing element with id value of 'backgroundStorage'"):(n=e.background.image.url.split("?"),s=1===n.length?"?":"&",u.style.backgroundImage="url("+e.background.image.url+")",o())):o():console.log("Missing element with id value of 'background'")}function a(e){r?e&&"function"==typeof e&&e():(e&&(i=e),t())}var i=null,r=!1,u=null,l=null,c=9e5,g=!1,s="";return{init:a}};