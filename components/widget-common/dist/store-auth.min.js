var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Store=RiseVision.Common.Store||{},RiseVision.Common.Store.Auth={},RiseVision.Common.Store.Auth=function(){function i(i){o=document.createElement("div"),o.className="overlay",document.body.appendChild(o),e=document.createElement("div"),e.className="auth-warning",e.innerHTML=i,e=document.body.appendChild(e)}function t(){o&&e&&(e.parentNode.removeChild(e),o.parentNode.removeChild(o))}var o,e,n=36e5;this.callback=null,this.authorized=!1,this.isAuthorized=function(){return this.authorized},this.checkForDisplay=function(i,t,o){this.callback=o,this.url=WIDGET_COMMON_CONFIG.STORE_URL+WIDGET_COMMON_CONFIG.AUTH_PATH_URL+"?id="+i+"&pc="+t,this.callApi()},this.checkForCompany=function(i,t,o){this.callback=o,this.url=WIDGET_COMMON_CONFIG.STORE_URL+WIDGET_COMMON_CONFIG.AUTH_PATH_URL+"?cid="+i+"&pc="+t,this.callApi()},this.callApi=function(){var i=this;$.ajax({dataType:"json",url:this.url,success:function(t,o){i.onSuccess(t,o)},error:function(){i.onError()}})},this.onSuccess=function(o){if(o&&o.authorized){this.authorized=!0,t();var e=new Date(o.expiry).getTime()-(new Date).getTime()-n;setTimeout(this.callApi,e)}else o&&!o.authorized?(this.authorized=!1,i("Product not authorized."),setTimeout(this.callApi,n)):setTimeout(this.callApi,n);this.callback&&this.callback(this.authorized)},this.onError=function(){this.authorized=!1,i("Cannot connect to Store for authorization."),setTimeout(this.callApi,n),this.callback&&this.callback(this.authorized)}};