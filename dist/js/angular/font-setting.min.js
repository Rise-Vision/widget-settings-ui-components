!function(){"use strict";angular.module("risevision.widget.common.font-setting",["angularLoad","ui.tinymce"]).directive("fontSetting",["$templateCache","$log","googleFontLoader",function(e,t,n){return{restrict:"AE",scope:{fontData:"=",previewText:"@"},template:e.get("_angular/font-setting/font-setting.html"),transclude:!1,link:function(e){function t(t){e.tinymceOptions={font_formats:WIDGET_SETTINGS_UI_CONFIG.families+t,fontsize_formats:WIDGET_SETTINGS_UI_CONFIG.sizes,menubar:!1,plugins:"textcolor",statusbar:!1,toolbar:"fontselect fontsizeselect | alignleft aligncenter alignright alignjustify | forecolor backcolor | bold italic underline",setup:function(e){e.on("init",function(){a(e)}),e.on("ExecCommand",function(e){o(e)})},init_instance_callback:function(e){var t=e.formatter.apply;e.formatter.apply=function(n,a,o){var i={command:n,value:a.value};t(n,a,o),e.fire("ExecCommand",i)}}}}function a(e){if(r){switch(r.align){case"left":e.execCommand("JustifyLeft",!1);break;case"center":e.execCommand("JustifyCenter",!1);break;case"right":e.execCommand("JustifyRight",!1);break;case"justify":e.execCommand("JustifyFull",!1)}$(".mce-colorbutton[aria-label='Text color'] span").css("background-color",r.forecolor),$(".mce-colorbutton[aria-label='Background color'] span").css("background-color",r.backcolor),r.bold&&i($(".mce-btn[aria-label='Bold']")),r.italic&&i($(".mce-btn[aria-label='Italic']")),r.underline&&i($(".mce-btn[aria-label='Underline']")),e.execCommand("FontName",!1,r.family),e.execCommand("FontSize",!1,r.size)}}function o(e){switch(e.command){case"FontName":r.family=e.value;break;case"FontSize":r.size=e.value;break;case"JustifyLeft":r.align="left";break;case"JustifyCenter":r.align="center";break;case"JustifyRight":r.align="right";break;case"JustifyFull":r.align="justify";break;case"forecolor":r.forecolor=e.value;break;case"hilitecolor":r.backcolor=e.value;break;case"mceToggleFormat":"bold"===e.value?(r.bold=!r.bold,i($(".mce-btn[aria-label='Bold']"))):"italic"===e.value?(r.italic=!r.italic,i($(".mce-btn[aria-label='Italic']"))):"underline"===e.value&&(r.underline=!r.underline,i($(".mce-btn[aria-label='Underline']")))}l(r)}function i(e){e.toggleClass("mce-active")}function l(t){var n=document.querySelector(".text-container"),a=document.querySelector(".text");e.previewText&&t&&(a.style.fontFamily=t.family,a.style.fontSize=t.size,a.style.fontWeight=t.bold?"bold":"normal",a.style.fontStyle=t.italic?"italic":"normal",a.style.textDecoration=t.underline?"underline":"none",a.style.color=t.forecolor,a.style.backgroundColor=t.backcolor,n.style.textAlign=t.align)}var r=null;e.defaultFont={family:"verdana,geneva,sans-serif",size:"24px",align:"left",bold:!1,italic:!1,underline:!1,forecolor:"black",backcolor:"transparent"},n.getFonts().then(function(e){t(e)}),e.defaults=function(e){if(e)for(var t=1,n=arguments.length;n>t;t++){var a=arguments[t];for(var o in a)void 0===e[o]&&(e[o]=a[o])}return e};var c=e.$watch("fontData",function(t){t&&(e.defaults(t,e.defaultFont),l(t),c(),e.previewText&&e.$watch("fontData",l,!0),r=t)})}}}])}(),function(){"use strict";angular.module("risevision.widget.common.font-setting").factory("googleFontLoader",["$http","angularLoad",function(e,t){var n="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBXxVK_IOV7LNQMuVVo_l7ZvN53ejN86zY",a="http://fonts.googleapis.com/css?family=",o=["Buda","Coda Caption","Open Sans Condensed","UnifrakturCook","Molle"],i=",sans-serif;",l="",r={};return r.getFonts=function(){return e.get(n,{cache:!0}).then(function(e){var n="";if(e.data&&e.data.items)for(var r=0;r<e.data.items.length;r++)n=e.data.items[r].family,-1===o.indexOf(n)&&(t.loadCSS(a+n).then(function(){}),l+=n+"="+n+i);return l})},r}])}(),function(e){try{e=angular.module("risevision.widget.common.font-setting")}catch(t){e=angular.module("risevision.widget.common.font-setting",[])}e.run(["$templateCache",function(e){"use strict";e.put("_angular/font-setting/font-setting.html",'<div class="font-setting">\n  <div class="row">\n    <div class="col-md-12">\n      <textarea ui-tinymce="tinymceOptions" ng-model="tinymceModel" ng-if="tinymceOptions"></textarea>\n    </div>\n  </div>\n  <div class="row" ng-if="previewText">\n    <div class="col-md-12">\n      <div class="text-container form-group">\n        <span class="text">{{previewText}}</span>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}();