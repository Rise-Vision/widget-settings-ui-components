!function(){"use strict";angular.module("risevision.widget.common.font-setting",["ui.tinymce"]).directive("fontSetting",["$templateCache",function(e){return{restrict:"AE",scope:{fontData:"=",previewText:"@",hideAlignment:"@"},template:e.get("_angular/font-setting/font-setting.html"),transclude:!1,link:function(e,t,n){function i(e){e.toggleClass("mce-active")}function l(t){var n=document.querySelector(".text-container"),i=document.querySelector(".text");e.previewText&&t&&(i.style.fontFamily=t.font.family,i.style.fontSize=t.size,i.style.fontWeight=t.bold?"bold":"normal",i.style.fontStyle=t.italic?"italic":"normal",i.style.textDecoration=t.underline?"underline":"none",i.style.color=t.color,i.style.backgroundColor=t.highlightColor,n.style.textAlign=t.align)}var a=null;e.defaultFont={font:{type:"standard",name:"Verdana",family:"verdana,geneva,sans-serif"},size:"24px",bold:!1,italic:!1,underline:!1,color:"black",highlightColor:"transparent"},e.tinymceOptions={content_css:"http://fonts.googleapis.com/css?family=Aclonica,http://fonts.googleapis.com/css?family=Rock+Salt",selector:"textarea",menubar:!1,statusbar:!1,plugins:"textcolor",toolbar:"fontselect fontsizeselect | alignleft aligncenter alignright alignjustify | forecolor backcolor | bold italic underline",fontsize_formats:"8px 9px 10px 11px 12px 14px 18px 24px 30px 36px 48px 60px 72px 96px",setup:function(e){var t=document.querySelector(".text-container"),n=document.querySelector(".text"),l=null,o=null,r=null;e.on("init",function(){if(l=$(".mce-btn[aria-label='Bold']"),o=$(".mce-btn[aria-label='Italic']"),r=$(".mce-btn[aria-label='Underline']"),a){switch(a.align){case"left":e.execCommand("JustifyLeft",!1);break;case"center":e.execCommand("JustifyCenter",!1);break;case"right":e.execCommand("JustifyRight",!1);break;case"justify":e.execCommand("JustifyFull",!1)}a.bold&&i(l),a.italic&&i(o),a.underline&&i(r),e.execCommand("FontName",!1,a.font.family),e.execCommand("FontSize",!1,a.size)}}),e.on("ExecCommand",function(e){switch(e.command){case"FontName":a.font.family=e.value,n.style.fontFamily=e.value;break;case"FontSize":a.size=e.value,n.style.fontSize=e.value;break;case"JustifyLeft":a.align="left",t.style.textAlign="left";break;case"JustifyCenter":a.align="center",t.style.textAlign="center";break;case"JustifyRight":a.align="right",t.style.textAlign="right";break;case"JustifyFull":a.align="justify",t.style.textAlign="justify";break;case"forecolor":a.color=e.value,n.style.color=e.value;break;case"hilitecolor":a.highlightColor=e.value,n.style.backgroundColor=e.value;break;case"Bold":n.style.fontWeight=a.bold?"bold":"normal";break;case"mceToggleFormat":"bold"===e.value?(a.bold=!a.bold,n.style.fontWeight=a.bold?"bold":"normal",i(l)):"italic"===e.value?(a.italic=!a.italic,n.style.fontStyle=a.italic?"italic":"normal",i(o)):"underline"===e.value&&(a.underline=!a.underline,n.style.textDecoration=a.underline?"underline":"none",i(r))}})},init_instance_callback:function(e){var t=e.formatter.apply;e.formatter.apply=function(n,i,l){var a={command:n,value:i.value};t(n,i,l),e.fire("ExecCommand",a)}}},("undefined"==typeof n.hideAlignment||"true"!==n.hideAlignment)&&(e.defaultFont.align="left"),e.defaults=function(e){if(e)for(var t=1,n=arguments.length;n>t;t++){var i=arguments[t];for(var l in i)void 0===e[l]&&(e[l]=i[l])}return e};var o=e.$watch("fontData",function(t){t&&(e.defaults(t,e.defaultFont),l(t),o(),e.previewText&&e.$watch("fontData",l,!0),a=t)})}}}])}(),function(e){try{e=angular.module("risevision.widget.common.font-setting")}catch(t){e=angular.module("risevision.widget.common.font-setting",[])}e.run(["$templateCache",function(e){"use strict";e.put("_angular/font-setting/font-setting.html",'<div class="font-setting">\n  <div class="row">\n    <div class="col-md-12">\n      <textarea ui-tinymce="tinymceOptions" ng-model="tinymceModel" ng-if="tinymceOptions"></textarea>\n    </div>\n  </div>\n  <div class="row" ng-if="previewText">\n    <div class="col-md-12">\n      <div class="text-container form-group">\n        <span class="text">{{previewText}}</span>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}();