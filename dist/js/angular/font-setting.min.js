!function(){"use strict";angular.module("risevision.widget.common.font-setting",["angularLoad","ui.tinymce"]).directive("fontSetting",["$templateCache","$log","googleFontLoader",function(e,t,n){return{restrict:"AE",scope:{fontData:"=",previewText:"@",hideAlignment:"@"},template:e.get("_angular/font-setting/font-setting.html"),transclude:!1,link:function(e,t,a){function o(t){e.tinymceOptions={font_formats:WIDGET_SETTINGS_UI_CONFIG.families+t,fontsize_formats:WIDGET_SETTINGS_UI_CONFIG.sizes,menubar:!1,plugins:"textcolor",statusbar:!1,toolbar:"fontselect fontsizeselect | alignleft aligncenter alignright alignjustify | forecolor backcolor | bold italic underline",setup:function(e){e.on("init",function(){i(e)}),e.on("ExecCommand",function(e){l(e)})},init_instance_callback:function(e){var t=e.formatter.apply;e.formatter.apply=function(n,a,o){var i={command:n,value:a.value};t(n,a,o),e.fire("ExecCommand",i)}}}}function i(e){if(s){switch(s.align){case"left":e.execCommand("JustifyLeft",!1);break;case"center":e.execCommand("JustifyCenter",!1);break;case"right":e.execCommand("JustifyRight",!1);break;case"justify":e.execCommand("JustifyFull",!1)}$(".mce-colorbutton[aria-label='Text color'] span").css("background-color",s.forecolor),$(".mce-colorbutton[aria-label='Background color'] span").css("background-color",s.backcolor),s.bold&&r($(".mce-btn[aria-label='Bold']")),s.italic&&r($(".mce-btn[aria-label='Italic']")),s.underline&&r($(".mce-btn[aria-label='Underline']")),e.execCommand("FontName",!1,s.family),e.execCommand("FontSize",!1,s.size)}}function l(e){switch(e.command){case"FontName":s.family=e.value;break;case"FontSize":s.size=e.value;break;case"JustifyLeft":s.align="left";break;case"JustifyCenter":s.align="center";break;case"JustifyRight":s.align="right";break;case"JustifyFull":s.align="justify";break;case"forecolor":s.forecolor=e.value;break;case"hilitecolor":s.backcolor=e.value;break;case"mceToggleFormat":"bold"===e.value?(s.bold=!s.bold,r($(".mce-btn[aria-label='Bold']"))):"italic"===e.value?(s.italic=!s.italic,r($(".mce-btn[aria-label='Italic']"))):"underline"===e.value&&(s.underline=!s.underline,r($(".mce-btn[aria-label='Underline']")))}c(s)}function r(e){e.toggleClass("mce-active")}function c(t){var n=document.querySelector(".text-container"),a=document.querySelector(".text");e.previewText&&t&&(a.style.fontFamily=t.family,a.style.fontSize=t.size,a.style.fontWeight=t.bold?"bold":"normal",a.style.fontStyle=t.italic?"italic":"normal",a.style.textDecoration=t.underline?"underline":"none",a.style.color=t.forecolor,a.style.backgroundColor=t.backcolor,n.style.textAlign=t.align)}var s=null;e.defaultFont={family:"verdana,geneva,sans-serif",size:"24px",bold:!1,italic:!1,underline:!1,forecolor:"black",backcolor:"transparent"},n.getFonts().then(function(e){o(e)}),("undefined"==typeof a.hideAlignment||"true"!==a.hideAlignment)&&(e.defaultFont.align="left"),e.defaults=function(e){if(e)for(var t=1,n=arguments.length;n>t;t++){var a=arguments[t];for(var o in a)void 0===e[o]&&(e[o]=a[o])}return e};var u=e.$watch("fontData",function(t){t&&(e.defaults(t,e.defaultFont),c(t),u(),e.previewText&&e.$watch("fontData",c,!0),s=t)})}}}])}(),function(){"use strict";angular.module("risevision.widget.common.font-setting").factory("googleFontLoader",["$http","$log","angularLoad",function(e,t,n){var a="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBXxVK_IOV7LNQMuVVo_l7ZvN53ejN86zY",o="http://fonts.googleapis.com/css?family=",i=["Buda","Coda Caption","Open Sans Condensed","UnifrakturCook","Molle"],l=",sans-serif;",r="",c={};return c.getFonts=function(){return e.get(a,{cache:!0}).then(function(e){var t="";if(e.data&&e.data.items)for(var a=0;a<e.data.items.length;a++)t=e.data.items[a].family,-1===i.indexOf(t)&&(n.loadCSS(o+t).then(function(){}),r+=t+"="+t+l);return r})},c}])}(),function(e){try{e=angular.module("risevision.widget.common.font-setting")}catch(t){e=angular.module("risevision.widget.common.font-setting",[])}e.run(["$templateCache",function(e){"use strict";e.put("_angular/font-setting/font-setting.html",'<div class="font-setting">\n  <div class="row">\n    <div class="col-md-12">\n      <textarea ui-tinymce="tinymceOptions" ng-model="tinymceModel" ng-if="tinymceOptions"></textarea>\n    </div>\n  </div>\n  <div class="row" ng-if="previewText">\n    <div class="col-md-12">\n      <div class="text-container form-group">\n        <span class="text">{{previewText}}</span>\n      </div>\n    </div>\n  </div>\n</div>\n')}])}();